<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Minecraft Ã— Scratch ç°¡å˜ã‚¹ã‚¿ãƒ¼ãƒˆ</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .step {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #4CAF50;
        }
        .step h3 {
            margin-top: 0;
            color: #4CAF50;
        }
        .button {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s;
        }
        .button:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        .status {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        .connection-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .connected { background-color: #4CAF50; }
        .disconnected { background-color: #f44336; }
        .sample-code {
            background: rgba(0,0,0,0.5);
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            margin: 10px 0;
            border-left: 3px solid #FFC107;
        }
        .warning {
            background: rgba(255,152,0,0.2);
            border: 1px solid #FF9800;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ® Minecraft Ã— Scratch</h1>
            <p>ç°¡å˜3ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°é–‹å§‹ï¼</p>
        </div>

        <div class="status">
            <span class="connection-dot disconnected" id="status-dot"></span>
            <span id="status-text">Minecraftæ¥ç¶šãƒã‚§ãƒƒã‚¯ä¸­...</span>
        </div>

        <div class="step">
            <h3>ã‚¹ãƒ†ãƒƒãƒ—1ï¸âƒ£: æº–å‚™å®Œäº†ç¢ºèª</h3>
            <p>âœ… æ‹¡å¼µæ©Ÿèƒ½ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª</p>
            <p id="server-status">ğŸ”„ ç¢ºèªä¸­...</p>
        </div>

        <div class="step">
            <h3>ã‚¹ãƒ†ãƒƒãƒ—2ï¸âƒ£: Minecraftã‚’èµ·å‹•</h3>
            <p>æ™®é€šã«Minecraft Javaç‰ˆã‚’èµ·å‹•ã—ã¦ãƒ¯ãƒ¼ãƒ«ãƒ‰ã«å…¥ã£ã¦ãã ã•ã„</p>
            <div class="warning">
                <strong>é‡è¦:</strong> Minecraft Collaboration ModãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
            </div>
        </div>

        <div class="step">
            <h3>ã‚¹ãƒ†ãƒƒãƒ—3ï¸âƒ£: Scratchã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</h3>
            <p>ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰Scratchã‚’é–‹ã„ã¦ã€æ‹¡å¼µæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ãã ã•ã„</p>
            
            <a href="https://scratch.mit.edu/projects/editor/" target="_blank" class="button">
                ğŸš€ Scratchã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚’é–‹ã
            </a>
            
            <div style="margin-top: 20px;">
                <h4>ğŸ“š æ‹¡å¼µæ©Ÿèƒ½ã®è¿½åŠ æ–¹æ³•:</h4>
                <div class="warning">
                    <strong>é‡è¦:</strong> Scratchã§ã¯ã€æ®‹å¿µãªãŒã‚‰ã‚«ã‚¹ã‚¿ãƒ æ‹¡å¼µæ©Ÿèƒ½ã®è¿½åŠ ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>
                    ä»£ã‚ã‚Šã«ä»¥ä¸‹ã®æ–¹æ³•ã‚’ãŠè©¦ã—ãã ã•ã„ï¼š
                </div>
                
                <h4>ğŸ”§ ä»£æ›¿æ–¹æ³•1: ScratchXã‚’ä½¿ç”¨</h4>
                <ol>
                    <li><a href="http://scratchx.org/" target="_blank" class="button">ScratchX</a> ã«ã‚¢ã‚¯ã‚»ã‚¹</li>
                    <li>ã€ŒI understand...ã€ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ã€ŒOKã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>URLã®æœ€å¾Œã«ä»¥ä¸‹ã‚’è¿½åŠ :</li>
                    <div class="sample-code">
                        ?url=http://localhost:8080/minecraft-collaboration-extension.js
                    </div>
                    <li>Minecraft Controllerãƒ–ãƒ­ãƒƒã‚¯ãŒä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™</li>
                </ol>
                
                <h4>ğŸ”§ ä»£æ›¿æ–¹æ³•2: ãƒ­ãƒ¼ã‚«ãƒ«WebSocketæ¥ç¶š</h4>
                <p>Scratchã®æ¨™æº–ãƒ–ãƒ­ãƒƒã‚¯ã§ã‚‚WebSocketã«æ¥ç¶šã§ãã¾ã™ï¼ˆä¸Šç´šè€…å‘ã‘ï¼‰</p>
            </div>
        </div>

        <div class="step">
            <h3>ğŸ¨ åˆå›ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¾‹</h3>
            <p>ä»¥ä¸‹ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’çµ„ã¿åˆã‚ã›ã¦è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼š</p>
            
            <div class="sample-code">
ğŸ”Œ Minecraftã«æ¥ç¶šã™ã‚‹<br>
ğŸ§± [stone]ã‚’ X:[0] Y:[70] Z:[0] ã«ç½®ã<br>
ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ: [ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç½®ã„ãŸã‚ˆï¼]
            </div>

            <div class="sample-code">
ğŸ”Œ Minecraftã«æ¥ç¶šã™ã‚‹<br>
10 å›ãã‚Šã‹ãˆã™<br>
&nbsp;&nbsp;ğŸ§± [stone]ã‚’ X:[0] Y:[64 + ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼] Z:[0] ã«ç½®ã<br>
&nbsp;&nbsp;0.5ç§’å¾…ã¤
            </div>
        </div>

        <div class="step">
            <h3>â“ å›°ã£ãŸã¨ãã¯</h3>
            <ul>
                <li><strong>æ¥ç¶šã§ããªã„:</strong> MinecraftãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª</li>
                <li><strong>ãƒ–ãƒ­ãƒƒã‚¯ãŒç½®ã‘ãªã„:</strong> åº§æ¨™ã‚’ç¢ºèªï¼ˆF3ã‚­ãƒ¼ã§ç¾åœ¨ä½ç½®ï¼‰</li>
                <li><strong>æ‹¡å¼µæ©Ÿèƒ½ãŒèª­ã¿è¾¼ã‚ãªã„:</strong> HTTPã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª</li>
            </ul>
        </div>
    </div>

    <script>
        let ws = null;

        function checkMinecraftConnection() {
            try {
                if (ws) ws.close();
                
                ws = new WebSocket('ws://localhost:14711');
                
                ws.onopen = function() {
                    updateStatus(true, 'Minecraftæ¥ç¶šä¸­ âœ… ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°é–‹å§‹ã§ãã¾ã™ï¼');
                };
                
                ws.onclose = function() {
                    updateStatus(false, 'Minecraftæœªæ¥ç¶š âŒ Minecraftã‚’èµ·å‹•ã—ã¦ãã ã•ã„');
                };
                
                ws.onerror = function() {
                    updateStatus(false, 'Minecraftèµ·å‹•å¾…ã¡ ğŸ® ãƒ¯ãƒ¼ãƒ«ãƒ‰ã«å…¥ã£ã¦ãã ã•ã„');
                };
                
            } catch (error) {
                updateStatus(false, 'Minecraftèµ·å‹•å¾…ã¡ ğŸ®');
            }
        }

        function updateStatus(connected, message) {
            const dot = document.getElementById('status-dot');
            const text = document.getElementById('status-text');
            
            dot.className = 'connection-dot ' + (connected ? 'connected' : 'disconnected');
            text.textContent = message;
        }

        function checkExtensionServer() {
            fetch('http://localhost:8080/minecraft-collaboration-extension.js')
                .then(response => {
                    if (response.ok) {
                        document.getElementById('server-status').innerHTML = 'âœ… æ‹¡å¼µæ©Ÿèƒ½ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ä¸­';
                    } else {
                        document.getElementById('server-status').innerHTML = 'âŒ æ‹¡å¼µæ©Ÿèƒ½ã‚µãƒ¼ãƒãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“';
                    }
                })
                .catch(() => {
                    document.getElementById('server-status').innerHTML = 'âŒ æ‹¡å¼µæ©Ÿèƒ½ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ãã ã•ã„';
                });
        }

        // åˆæœŸåŒ–
        window.onload = function() {
            checkMinecraftConnection();
            checkExtensionServer();
            setInterval(checkMinecraftConnection, 3000);
            setInterval(checkExtensionServer, 5000);
        };

        window.onbeforeunload = function() {
            if (ws) ws.close();
        };
    </script>
</body>
</html>