<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å®Ÿè£… - æœ€çµ‚çŠ¶æ…‹</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #4CAF50; }
        h2 { color: #2196F3; }
        .status { 
            background: #e8f5e9; 
            padding: 20px; 
            border-radius: 8px;
            margin: 20px 0;
        }
        .code-block {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        .success { color: #4CAF50; font-weight: bold; }
        .warning { color: #FF9800; font-weight: bold; }
        .step {
            background: #f9f9f9;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #2196F3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Scratch GUI ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å®Ÿè£…çŠ¶æ³</h1>
        
        <div class="status">
            <h2>âœ… å®Ÿè£…å®Œäº†å†…å®¹</h2>
            <ul>
                <li class="success">ãƒ–ãƒ­ãƒƒã‚¯ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆå·¦å´ï¼‰ã®å³ä¸‹ã«ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’é…ç½®</li>
                <li class="success">ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒªã‚¢ï¼ˆå³å´ï¼‰ã¨åŒã˜Blocklyãƒã‚¤ãƒ†ã‚£ãƒ–ã®ãƒ‡ã‚¶ã‚¤ãƒ³</li>
                <li class="success">ç¸¦å‹3ãƒœã‚¿ãƒ³é…ç½®ï¼ˆ+ã€â—‹ã€âˆ’ï¼‰</li>
                <li class="success">ã‚ºãƒ¼ãƒ æ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆæ‹¡å¤§ãƒ»ç¸®å°ãƒ»ãƒªã‚»ãƒƒãƒˆï¼‰</li>
            </ul>
        </div>
        
        <h2>âš ï¸ ç¾åœ¨ã®å•é¡Œã¨è§£æ±ºæ–¹æ³•</h2>
        
        <div class="step">
            <h3>å•é¡Œ1: ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„</h3>
            <p><strong>åŸå› :</strong> SVGãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ãŒç›¸å¯¾ãƒ‘ã‚¹ã«ãªã£ã¦ã„ã‚‹</p>
            <p><strong>è§£æ±ºæ–¹æ³•:</strong> ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ</p>
        </div>
        
        <div class="step">
            <h3>å•é¡Œ2: ãƒœã‚¿ãƒ³ãŒè–„ãè¡¨ç¤ºã•ã‚Œã‚¯ãƒªãƒƒã‚¯ã§ããªã„</h3>
            <p><strong>åŸå› :</strong> opacityè¨­å®šã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®å•é¡Œ</p>
            <p><strong>è§£æ±ºæ–¹æ³•:</strong> ä»¥ä¸‹ã®ä¿®æ­£ã‚³ãƒ¼ãƒ‰ã§å¯¾å¿œ</p>
        </div>
        
        <h2>ğŸ› ï¸ ä¿®æ­£ã‚³ãƒ¼ãƒ‰ï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œï¼‰</h2>
        
        <div class="code-block">// å®Œå…¨ãªä¿®æ­£ã‚³ãƒ¼ãƒ‰ - ã‚³ãƒ”ãƒ¼ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„
(function fixZoomControls() {
    // ã™ã¹ã¦ã®ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’å–å¾—
    const zoomControls = document.querySelectorAll('.blocklyZoom');
    
    zoomControls.forEach((zoomGroup, index) => {
        console.log(`ä¿®æ­£ä¸­: ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« ${index + 1}`);
        
        // ã‚°ãƒ«ãƒ¼ãƒ—å…¨ä½“ã‚’ä¿®æ­£
        zoomGroup.style.opacity = '1';
        zoomGroup.style.pointerEvents = 'all';
        
        // å„ç”»åƒãƒœã‚¿ãƒ³ã‚’ä¿®æ­£
        const images = zoomGroup.querySelectorAll('image');
        images.forEach((img, imgIndex) => {
            // è¦‹ãŸç›®ã‚’ä¿®æ­£
            img.style.opacity = '1';
            img.setAttribute('opacity', '1');
            img.style.cursor = 'pointer';
            img.style.pointerEvents = 'all';
            
            // ç”»åƒãƒ‘ã‚¹ã‚’ä¿®æ­£
            const href = img.getAttributeNS('http://www.w3.org/1999/xlink', 'href');
            if (href) {
                const fileName = href.split('/').pop();
                img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', 
                    `/static/blocks-media/default/${fileName}`);
            }
            
            // ãƒ•ãƒ©ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒ–ãƒ­ãƒƒã‚¯ãƒ‘ãƒ¬ãƒƒãƒˆï¼‰ã®ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
            if (index === 1) { // 2ç•ªç›®ã®ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
                img.onclick = function(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    
                    if (window.Blockly && window.Blockly.mainWorkspace) {
                        const flyout = window.Blockly.mainWorkspace.getFlyout();
                        if (flyout) {
                            const flyoutWs = flyout.getWorkspace();
                            const currentScale = flyoutWs.scale || 1;
                            
                            if (imgIndex === 0) { // ã‚ºãƒ¼ãƒ ã‚¤ãƒ³
                                flyoutWs.setScale(Math.min(currentScale * 1.1, 3));
                            } else if (imgIndex === 1) { // ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆ  
                                flyoutWs.setScale(Math.max(currentScale * 0.9, 0.3));
                            } else if (imgIndex === 2) { // ãƒªã‚»ãƒƒãƒˆ
                                flyoutWs.setScale(1);
                            }
                            
                            // ãƒ•ãƒ©ã‚¤ã‚¢ã‚¦ãƒˆã‚’å†æç”»
                            if (flyout.reflowInternal_) {
                                flyout.reflowInternal_();
                                flyout.position();
                            }
                        }
                    }
                };
            }
        });
    });
    
    console.log('âœ… ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®ä¿®æ­£ãŒå®Œäº†ã—ã¾ã—ãŸ');
    return 'ä¿®æ­£å®Œäº†';
})();</div>
        
        <h2>ğŸ“‹ ä½¿ç”¨æ‰‹é †</h2>
        
        <ol class="step">
            <li>Scratch GUIã‚’é–‹ãï¼ˆé€šå¸¸ã¯http://localhost:8080ï¼‰</li>
            <li>F12ã‚­ãƒ¼ã§é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã</li>
            <li>ã€Œã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            <li>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘</li>
            <li>Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦å®Ÿè¡Œ</li>
        </ol>
        
        <h2>ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹çµæœ</h2>
        
        <ul>
            <li>ä¸¡æ–¹ã®ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãŒé€šå¸¸ã®æ¿ƒã•ã§è¡¨ç¤ºã•ã‚Œã‚‹</li>
            <li>ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆ+ã€â—‹ã€âˆ’ï¼‰ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹</li>
            <li>ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ‹¡å¤§ãƒ»ç¸®å°ãƒ»ãƒªã‚»ãƒƒãƒˆãŒå‹•ä½œã™ã‚‹</li>
            <li>ãƒ–ãƒ­ãƒƒã‚¯ãƒ‘ãƒ¬ãƒƒãƒˆã¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒªã‚¢ã®ä¸¡æ–¹ã§åŒã˜ãƒ‡ã‚¶ã‚¤ãƒ³</li>
        </ul>
        
        <div class="status" style="background: #fff3e0;">
            <h3>ğŸ“ æŠ€è¡“çš„ãªè©³ç´°</h3>
            <p><strong>å®Ÿè£…æ–¹æ³•:</strong> Blockly.ZoomControlsã‚¯ãƒ©ã‚¹ã®ä»£ã‚ã‚Šã«SVGè¦ç´ ã‚’ç›´æ¥ä½œæˆ</p>
            <p><strong>é…ç½®:</strong> ãƒ•ãƒ©ã‚¤ã‚¢ã‚¦ãƒˆãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®SVGã«è¿½åŠ </p>
            <p><strong>ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†:</strong> ScratchBlocks.bindEventWithChecks_ã‚’ä½¿ç”¨</p>
            <p><strong>ã‚¹ã‚±ãƒ¼ãƒ«åˆ¶é™:</strong> æœ€å°0.3å€ã€æœ€å¤§3å€</p>
        </div>
    </div>
</body>
</html>